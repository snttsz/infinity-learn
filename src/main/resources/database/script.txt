CREATE TABLE IF NOT EXISTS usuario (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    nome TEXT NOT NULL,
    senha TEXT NOT NULL,
    email TEXT NOT NULL UNIQUE,
    apelido TEXT NOT NULL,
    url_foto TEXT,
    tipo TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS curso (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    titulo TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS aula (
  idAula INTEGER PRIMARY KEY AUTOINCREMENT,
  Curso_idCurso INTEGER NOT NULL,
  FOREIGN KEY (Curso_idCurso) REFERENCES Curso (idCurso) ON DELETE NO ACTION ON UPDATE NO ACTION
);


CREATE TABLE IF NOT EXISTS tarefa (
  idTarefa INTEGER PRIMARY KEY AUTOINCREMENT,
  nota_maxima REAL NOT NULL,
  Aula_idAula INTEGER NOT NULL,
  FOREIGN KEY (Aula_idAula) REFERENCES Aula (idAula) ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS questao (
  idQuestao INTEGER PRIMARY KEY AUTOINCREMENT,
  descricao TEXT NOT NULL,
  Tarefa_idTarefa INTEGER NOT NULL,
  FOREIGN KEY (Tarefa_idTarefa) REFERENCES Tarefa (idTarefa) ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS usuario_has_curso (
  Usuario_idUsuario INTEGER NOT NULL,
  Curso_idCurso INTEGER NOT NULL,
  PRIMARY KEY (Usuario_idUsuario, Curso_idCurso),
  FOREIGN KEY (Usuario_idUsuario) REFERENCES Usuario (idUsuario) ON DELETE NO ACTION ON UPDATE NO ACTION,
  FOREIGN KEY (Curso_idCurso) REFERENCES Curso (idCurso) ON DELETE NO ACTION ON UPDATE NO ACTION
);